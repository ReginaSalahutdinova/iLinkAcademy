Диаграмма последовательности: авторизация через номер телефона

@startuml

Actor Actor as z

participant Frontend as f

participant "Backend\n(Gateway)" as g

participant "Backend\n(Auth)" as a

z -> f: выбор вида авторизации\nи ввод номера телефона

f -> g: передача информации\nо виде авторизации и номере телефона

g -> a: передача информации\nо виде авторизации и номере телефона

a -> a: валидация данных 


alt валидация не прошла

a --> g: сообщение об ошибке
    
g --> f: сообщение об ошибке


else валидация прошла успешно

a-> a: генерирование кода,\nсохранение в БД,\nотправка СМС на номер
   
a--> g : сообщение об успешном\nотправлении СМС

g--> f : сообщение об успешном\nотправлении СМС


end


z -> f: ввод кода из СМС

f -> g: передача данных номера и кода

g -> a: передача данных номера и кода


a -> a: валидация данных,\nпроверка введенных данных\nна соответствие в БД


alt валидация или проверка не прошла


a --> g: сообщение об ошибке
    
g --> f: сообщение об ошибке



else валидация, проверка прошла успешно



a--> g : отправка токена

g--> f : отправка токена

a--> z: предоставление доступа



end

@enduml
![image](https://user-images.githubusercontent.com/104089098/164284917-de448d44-25ac-458f-9b9e-6680c41af96b.png)

